<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controller.RefundController" stylesheets="@../css/application.css">
   <top>
      <HBox alignment="CENTER_LEFT" spacing="15.0" styleClass="header-gradient">
         <padding>
            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
         </padding>
         <Button fx:id="backButton" styleClass="header-accent-button" text="← Back to Refunds" />
         <Text fill="white" strokeType="OUTSIDE" strokeWidth="0.0" text="💰 Refund Approval">
            <font>
               <Font name="System Bold" size="28.0" />
            </font>
         </Text>
         <Region HBox.hgrow="ALWAYS" />
         <HBox spacing="10.0">
            <Button fx:id="approveButton" styleClass="button-success" text="✅ Approve" />
            <Button fx:id="rejectButton" styleClass="button-danger" text="❌ Reject" />
            <Button fx:id="printButton" styleClass="button-secondary" text="🖨️ Print" />
         </HBox>
      </HBox>
   </top>
   <center>
      <ScrollPane fitToWidth="true" styleClass="background-gray-light">
         <content>
            <VBox spacing="25.0" styleClass="background-gray-light">
               <padding>
                  <Insets bottom="30.0" left="30.0" right="30.0" top="30.0" />
               </padding>
               
               <!-- Refund Request Header -->
               <HBox spacing="20.0" styleClass="content-card,shadow-card-medium">
                  <padding>
                     <Insets bottom="25.0" left="25.0" right="25.0" top="25.0" />
                  </padding>
                  <VBox spacing="5.0">
                     <Text fill="#7f8c8d" strokeType="OUTSIDE" strokeWidth="0.0" text="Refund Request ID">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Text>
                     <Text fx:id="refundIdLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="REF-2024-001234">
                        <font>
                           <Font name="System Bold" size="20.0" />
                        </font>
                     </Text>
                  </VBox>
                  <Separator orientation="VERTICAL" />
                  <VBox spacing="5.0">
                     <Text fill="#7f8c8d" strokeType="OUTSIDE" strokeWidth="0.0" text="Status">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Text>
                     <Label fx:id="statusLabel" styleClass="status-badge,status-pending" text="PENDING REVIEW">
                        <font>
                           <Font name="System Bold" size="12.0" />
                        </font>
                     </Label>
                  </VBox>
                  <Separator orientation="VERTICAL" />
                  <VBox spacing="5.0">
                     <Text fill="#7f8c8d" strokeType="OUTSIDE" strokeWidth="0.0" text="Request Date">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Text>
                     <Text fx:id="requestDateLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="March 20, 2024">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Text>
                  </VBox>
                  <Region HBox.hgrow="ALWAYS" />
                  <VBox alignment="CENTER_RIGHT" spacing="5.0">
                     <Text fill="#7f8c8d" strokeType="OUTSIDE" strokeWidth="0.0" text="Refund Amount">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Text>
                     <Text fx:id="refundAmountLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="$1,247.50">
                        <font>
                           <Font name="System Bold" size="24.0" />
                        </font>
                     </Text>
                  </VBox>
               </HBox>
               
               <!-- Customer Information -->
               <VBox spacing="20.0" styleClass="content-card,shadow-card-medium">
                  <padding>
                     <Insets bottom="25.0" left="25.0" right="25.0" top="25.0" />
                  </padding>
                  <Text fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="👤 Customer Information">
                     <font>
                        <Font name="System Bold" size="18.0" />
                     </font>
                  </Text>
                  
                  <GridPane hgap="20.0" vgap="15.0">
                     <columnConstraints>
                        <ColumnConstraints hgrow="NEVER" maxWidth="120.0" minWidth="120.0" />
                        <ColumnConstraints hgrow="ALWAYS" />
                        <ColumnConstraints hgrow="NEVER" maxWidth="120.0" minWidth="120.0" />
                        <ColumnConstraints hgrow="ALWAYS" />
                     </columnConstraints>
                     
                     <Label text="Customer Name:" textFill="#7f8c8d" GridPane.columnIndex="0" GridPane.rowIndex="0">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Label>
                     <Text fx:id="customerNameLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="John Smith" GridPane.columnIndex="1" GridPane.rowIndex="0">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Text>
                     
                     <Label text="Customer ID:" textFill="#7f8c8d" GridPane.columnIndex="2" GridPane.rowIndex="0">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Label>
                     <Text fx:id="customerIdLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="CUST-2024-001234" GridPane.columnIndex="3" GridPane.rowIndex="0">
                        <font>
                           <Font size="14.0" />
                        </font>
                     </Text>
                     
                     <Label text="Email:" textFill="#7f8c8d" GridPane.columnIndex="0" GridPane.rowIndex="1">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Label>
                     <Text fx:id="emailLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="john.smith@email.com" GridPane.columnIndex="1" GridPane.rowIndex="1">
                        <font>
                           <Font size="14.0" />
                        </font>
                     </Text>
                     
                     <Label text="Phone:" textFill="#7f8c8d" GridPane.columnIndex="2" GridPane.rowIndex="1">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Label>
                     <Text fx:id="phoneLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="+1 (555) 123-4567" GridPane.columnIndex="3" GridPane.rowIndex="1">
                        <font>
                           <Font size="14.0" />
                        </font>
                     </Text>
                  </GridPane>
               </VBox>
               
               <!-- Booking Information -->
               <VBox spacing="20.0" styleClass="content-card,shadow-card-medium">
                  <padding>
                     <Insets bottom="25.0" left="25.0" right="25.0" top="25.0" />
                  </padding>
                  <Text fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="✈️ Booking Details">
                     <font>
                        <Font name="System Bold" size="18.0" />
                     </font>
                  </Text>
                  
                  <GridPane hgap="20.0" vgap="15.0">
                     <columnConstraints>
                        <ColumnConstraints hgrow="NEVER" maxWidth="150.0" minWidth="150.0" />
                        <ColumnConstraints hgrow="ALWAYS" />
                        <ColumnConstraints hgrow="NEVER" maxWidth="150.0" minWidth="150.0" />
                        <ColumnConstraints hgrow="ALWAYS" />
                     </columnConstraints>
                     
                     <Label text="Booking Reference:" textFill="#7f8c8d" GridPane.columnIndex="0" GridPane.rowIndex="0">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Label>
                     <Text fx:id="bookingReferenceLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="BK-2024-001234" GridPane.columnIndex="1" GridPane.rowIndex="0">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Text>
                     
                     <Label text="Flight Number:" textFill="#7f8c8d" GridPane.columnIndex="2" GridPane.rowIndex="0">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Label>
                     <Text fx:id="flightNumberLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="AA-1234" GridPane.columnIndex="3" GridPane.rowIndex="0">
                        <font>
                           <Font size="14.0" />
                        </font>
                     </Text>
                     
                     <Label text="Route:" textFill="#7f8c8d" GridPane.columnIndex="0" GridPane.rowIndex="1">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Label>
                     <Text fx:id="routeLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="New York (JFK) → Los Angeles (LAX)" GridPane.columnIndex="1" GridPane.rowIndex="1">
                        <font>
                           <Font size="14.0" />
                        </font>
                     </Text>
                     
                     <Label text="Departure Date:" textFill="#7f8c8d" GridPane.columnIndex="2" GridPane.rowIndex="1">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Label>
                     <Text fx:id="departureDateLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="March 25, 2024" GridPane.columnIndex="3" GridPane.rowIndex="1">
                        <font>
                           <Font size="14.0" />
                        </font>
                     </Text>
                     
                     <Label text="Passengers:" textFill="#7f8c8d" GridPane.columnIndex="0" GridPane.rowIndex="2">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Label>
                     <Text fx:id="passengersLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="2 Passengers" GridPane.columnIndex="1" GridPane.rowIndex="2">
                        <font>
                           <Font size="14.0" />
                        </font>
                     </Text>
                     
                     <Label text="Original Amount:" textFill="#7f8c8d" GridPane.columnIndex="2" GridPane.rowIndex="2">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Label>
                     <Text fx:id="originalAmountLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="$1,498.00" GridPane.columnIndex="3" GridPane.rowIndex="2">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Text>
                  </GridPane>
               </VBox>
               
               <!-- Refund Calculation -->
               <VBox spacing="20.0" styleClass="content-card,shadow-card-medium">
                  <padding>
                     <Insets bottom="25.0" left="25.0" right="25.0" top="25.0" />
                  </padding>
                  <Text fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="🧮 Refund Calculation">
                     <font>
                        <Font name="System Bold" size="18.0" />
                     </font>
                  </Text>
                  
                  <GridPane hgap="20.0" vgap="10.0">
                     <columnConstraints>
                        <ColumnConstraints hgrow="ALWAYS" />
                        <ColumnConstraints hgrow="NEVER" maxWidth="120.0" minWidth="120.0" />
                     </columnConstraints>
                     
                     <Label text="Original Booking Amount:" textFill="#7f8c8d" GridPane.columnIndex="0" GridPane.rowIndex="0">
                        <font>
                           <Font size="14.0" />
                        </font>
                     </Label>
                     <Text fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="$1,498.00" GridPane.columnIndex="1" GridPane.rowIndex="0">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Text>
                     
                     <Label text="Cancellation Fee:" textFill="#7f8c8d" GridPane.columnIndex="0" GridPane.rowIndex="1">
                        <font>
                           <Font size="14.0" />
                        </font>
                     </Label>
                     <Text fill="#e74c3c" strokeType="OUTSIDE" strokeWidth="0.0" text="-$200.00" GridPane.columnIndex="1" GridPane.rowIndex="1">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Text>
                     
                     <Label text="Processing Fee:" textFill="#7f8c8d" GridPane.columnIndex="0" GridPane.rowIndex="2">
                        <font>
                           <Font size="14.0" />
                        </font>
                     </Label>
                     <Text fill="#e74c3c" strokeType="OUTSIDE" strokeWidth="0.0" text="-$50.50" GridPane.columnIndex="1" GridPane.rowIndex="2">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Text>
                     
                     <Separator GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="3" />
                     
                     <Label text="Total Refund Amount:" textFill="#2c3e50" GridPane.columnIndex="0" GridPane.rowIndex="4">
                        <font>
                           <Font name="System Bold" size="16.0" />
                        </font>
                     </Label>
                     <Text fill="#27ae60" strokeType="OUTSIDE" strokeWidth="0.0" text="$1,247.50" GridPane.columnIndex="1" GridPane.rowIndex="4">
                        <font>
                           <Font name="System Bold" size="18.0" />
                        </font>
                     </Text>
                  </GridPane>
               </VBox>
               
               <!-- Refund Reason -->
               <VBox spacing="20.0" styleClass="content-card,shadow-card-medium">
                  <padding>
                     <Insets bottom="25.0" left="25.0" right="25.0" top="25.0" />
                  </padding>
                  <Text fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="📝 Refund Reason">
                     <font>
                        <Font name="System Bold" size="18.0" />
                     </font>
                  </Text>
                  
                  <VBox spacing="10.0">
                     <Label text="Reason Category:" textFill="#7f8c8d">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Label>
                     <Text fx:id="reasonCategoryLabel" fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="Flight Cancellation by Airline">
                        <font>
                           <Font size="14.0" />
                        </font>
                     </Text>
                  </VBox>
                  
                  <VBox spacing="10.0">
                     <Label text="Customer Explanation:" textFill="#7f8c8d">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Label>
                     <TextArea fx:id="customerExplanationArea" editable="false" maxHeight="100.0" styleClass="form-input-field" text="Flight AA-1234 was cancelled due to weather conditions. I was offered rebooking but the alternative flights don't work with my schedule. Requesting full refund as per airline policy for weather-related cancellations." wrapText="true">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </TextArea>
                  </VBox>
               </VBox>
               
               <!-- Supporting Documents -->
               <VBox spacing="20.0" styleClass="content-card,shadow-card-medium">
                  <padding>
                     <Insets bottom="25.0" left="25.0" right="25.0" top="25.0" />
                  </padding>
                  <Text fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="📎 Supporting Documents">
                     <font>
                        <Font name="System Bold" size="18.0" />
                     </font>
                  </Text>
                  
                  <ListView fx:id="documentsListView" maxHeight="120.0" styleClass="form-input-field" />
                  
                  <HBox spacing="15.0">
                     <Button fx:id="viewDocumentButton" styleClass="button-primary" text="👁️ View Document">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Button>
                     <Button fx:id="downloadAllButton" styleClass="button-secondary" text="📥 Download All">
                        <font>
                           <Font size="12.0" />
                        </font>
                     </Button>
                  </HBox>
               </VBox>
               
               <!-- Admin Review Section -->
               <VBox spacing="20.0" styleClass="content-card,shadow-card-medium">
                  <padding>
                     <Insets bottom="25.0" left="25.0" right="25.0" top="25.0" />
                  </padding>
                  <Text fill="#2c3e50" strokeType="OUTSIDE" strokeWidth="0.0" text="🛡️ Admin Review">
                     <font>
                        <Font name="System Bold" size="18.0" />
                     </font>
                  </Text>
                  
                  <VBox spacing="15.0">
                     <VBox spacing="5.0">
                        <Label text="Review Notes:" textFill="#2c3e50">
                           <font>
                              <Font name="System Bold" size="14.0" />
                           </font>
                        </Label>
                        <TextArea fx:id="reviewNotesArea" minHeight="80.0" promptText="Add your review notes here..." styleClass="form-input-field" wrapText="true">
                           <font>
                              <Font size="14.0" />
                           </font>
                        </TextArea>
                     </VBox>
                     
                     <HBox spacing="15.0">
                        <VBox spacing="5.0">
                           <Label text="Refund Method:" textFill="#2c3e50">
                              <font>
                                 <Font name="System Bold" size="14.0" />
                              </font>
                           </Label>
                           <ComboBox fx:id="refundMethodComboBox" minWidth="200.0" promptText="Select refund method" styleClass="form-input-field">
                           </ComboBox>
                        </VBox>
                        
                        <VBox spacing="5.0">
                           <Label text="Processing Time:" textFill="#2c3e50">
                              <font>
                                 <Font name="System Bold" size="14.0" />
                              </font>
                           </Label>
                           <ComboBox fx:id="processingTimeComboBox" minWidth="200.0" promptText="Expected processing time" styleClass="form-input-field">
                           </ComboBox>
                        </VBox>
                     </HBox>
                  </VBox>
                  
                  <Separator styleClass="separator-gray" />
                  
                  <HBox spacing="15.0">
                     <Button fx:id="saveReviewButton" styleClass="button-secondary" text="💾 Save Review">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Button>
                     <Region HBox.hgrow="ALWAYS" />
                     <Button fx:id="rejectRefundButton" styleClass="button-danger" text="❌ Reject Refund">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Button>
                     <Button fx:id="approveRefundButton" styleClass="button-success" text="✅ Approve Refund">
                        <font>
                           <Font name="System Bold" size="14.0" />
                        </font>
                     </Button>
                  </HBox>
               </VBox>
            </VBox>
         </content>
      </ScrollPane>
   </center>
</BorderPane> 