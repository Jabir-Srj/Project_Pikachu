<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<ScrollPane fitToWidth="true" fitToHeight="true" xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controller.RefundApprovalController">
   <content>
      <VBox maxWidth="1200.0" spacing="20.0">
         <children>
            <!-- Header -->
            <HBox alignment="CENTER_LEFT" spacing="15.0">
               <children>
                  <Button fx:id="backButton" mnemonicParsing="false" onAction="#handleBack" text="Back" />
                  <Label text="Refund Approval">
                     <font>
                        <Font name="System Bold" size="24.0" />
                     </font>
                  </Label>
               </children>
            </HBox>
            
            <!-- Filter Section -->
            <VBox maxWidth="1000.0" spacing="15.0">
               <children>
                  <Label text="Filter Refund Requests">
                     <font>
                        <Font name="System Bold" size="18.0" />
                     </font>
                  </Label>
                  
                  <HBox spacing="20.0">
                     <children>
                        <VBox maxWidth="200.0" spacing="5.0">
                           <children>
                              <Label text="Status" />
                              <ComboBox fx:id="statusFilterComboBox" maxWidth="180.0" promptText="All Status" />
                           </children>
                        </VBox>
                        
                        <VBox maxWidth="200.0" spacing="5.0">
                           <children>
                              <Label text="Request Type" />
                              <ComboBox fx:id="typeFilterComboBox" maxWidth="180.0" promptText="All Types" />
                           </children>
                        </VBox>
                        
                        <VBox maxWidth="200.0" spacing="5.0">
                           <children>
                              <Label text="Amount Range" />
                              <ComboBox fx:id="amountFilterComboBox" maxWidth="180.0" promptText="All Amounts" />
                           </children>
                        </VBox>
                        
                        <VBox maxWidth="150.0" spacing="5.0">
                           <children>
                              <Label text="Search" />
                              <TextField fx:id="searchField" maxWidth="130.0" promptText="Customer ID" />
                           </children>
                        </VBox>
                        
                        <VBox spacing="5.0">
                           <children>
                              <Label text="Actions" />
                              <HBox spacing="10.0">
                                 <children>
                                    <Button fx:id="applyFiltersButton" mnemonicParsing="false" onAction="#handleApplyFilters" text="Apply" />
                                    <Button fx:id="clearFiltersButton" mnemonicParsing="false" onAction="#handleClearFilters" text="Clear" />
                                 </children>
                              </HBox>
                           </children>
                        </VBox>
                     </children>
                  </HBox>
               </children>
            </VBox>
            
            <!-- Refund Requests Table -->
            <VBox maxWidth="1150.0" spacing="15.0">
               <children>
                  <HBox alignment="CENTER_LEFT" spacing="15.0">
                     <children>
                        <Label text="Pending Refund Requests">
                           <font>
                              <Font name="System Bold" size="18.0" />
                           </font>
                        </Label>
                        <Button fx:id="refreshButton" mnemonicParsing="false" onAction="#handleRefresh" text="Refresh" />
                     </children>
                  </HBox>
                  
                  <TableView fx:id="refundRequestsTableView" maxWidth="1100.0" prefHeight="300.0">
                     <columns>
                        <TableColumn fx:id="requestIdColumn" prefWidth="100.0" text="Request ID" />
                        <TableColumn fx:id="customerIdColumn" prefWidth="100.0" text="Customer ID" />
                        <TableColumn fx:id="customerNameColumn" prefWidth="150.0" text="Customer Name" />
                        <TableColumn fx:id="bookingIdColumn" prefWidth="100.0" text="Booking ID" />
                        <TableColumn fx:id="flightNumberColumn" prefWidth="100.0" text="Flight" />
                        <TableColumn fx:id="requestDateColumn" prefWidth="120.0" text="Request Date" />
                        <TableColumn fx:id="amountColumn" prefWidth="100.0" text="Amount" />
                        <TableColumn fx:id="reasonColumn" prefWidth="150.0" text="Reason" />
                        <TableColumn fx:id="statusColumn" prefWidth="100.0" text="Status" />
                        <TableColumn fx:id="priorityColumn" prefWidth="80.0" text="Priority" />
                     </columns>
                  </TableView>
               </children>
            </VBox>
            
            <!-- Selected Request Details -->
            <VBox maxWidth="1000.0" spacing="15.0">
               <children>
                  <Label text="Request Details">
                     <font>
                        <Font name="System Bold" size="18.0" />
                     </font>
                  </Label>
                  
                  <HBox spacing="30.0">
                     <children>
                        <VBox maxWidth="450.0" spacing="15.0" HBox.hgrow="ALWAYS">
                           <children>
                              <VBox spacing="10.0">
                                 <children>
                                    <Label text="Request Information">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    
                                    <HBox spacing="20.0">
                                       <children>
                                          <VBox maxWidth="200.0" spacing="8.0">
                                             <children>
                                                <Label text="Request ID" />
                                                <TextField fx:id="selectedRequestIdField" editable="false" maxWidth="180.0" />
                                                
                                                <Label text="Customer Name" />
                                                <TextField fx:id="selectedCustomerNameField" editable="false" maxWidth="180.0" />
                                                
                                                <Label text="Booking Reference" />
                                                <TextField fx:id="selectedBookingRefField" editable="false" maxWidth="180.0" />
                                             </children>
                                          </VBox>
                                          
                                          <VBox maxWidth="200.0" spacing="8.0">
                                             <children>
                                                <Label text="Request Date" />
                                                <TextField fx:id="selectedRequestDateField" editable="false" maxWidth="180.0" />
                                                
                                                <Label text="Refund Amount" />
                                                <TextField fx:id="selectedAmountField" editable="false" maxWidth="180.0" />
                                                
                                                <Label text="Current Status" />
                                                <TextField fx:id="selectedStatusField" editable="false" maxWidth="180.0" />
                                             </children>
                                          </VBox>
                                       </children>
                                    </HBox>
                                 </children>
                              </VBox>
                              
                              <VBox spacing="10.0">
                                 <children>
                                    <Label text="Flight Information">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    
                                    <VBox maxWidth="400.0" spacing="8.0">
                                       <children>
                                          <Label text="Flight Details" />
                                          <TextField fx:id="selectedFlightDetailsField" editable="false" maxWidth="380.0" />
                                          
                                          <Label text="Departure Date" />
                                          <TextField fx:id="selectedDepartureDateField" editable="false" maxWidth="380.0" />
                                          
                                          <Label text="Original Price" />
                                          <TextField fx:id="selectedOriginalPriceField" editable="false" maxWidth="380.0" />
                                       </children>
                                    </VBox>
                                 </children>
                              </VBox>
                           </children>
                        </VBox>
                        
                        <VBox maxWidth="450.0" spacing="15.0" HBox.hgrow="ALWAYS">
                           <children>
                              <VBox spacing="10.0">
                                 <children>
                                    <Label text="Refund Reason">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    <TextArea fx:id="refundReasonArea" editable="false" maxWidth="420.0" prefHeight="80.0" promptText="Customer refund reason..." />
                                 </children>
                              </VBox>
                              
                              <VBox spacing="10.0">
                                 <children>
                                    <Label text="Admin Notes">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    <TextArea fx:id="adminNotesArea" maxWidth="420.0" prefHeight="80.0" promptText="Add admin notes..." />
                                 </children>
                              </VBox>
                              
                              <VBox spacing="10.0">
                                 <children>
                                    <Label text="Decision">
                                       <font>
                                          <Font name="System Bold" size="16.0" />
                                       </font>
                                    </Label>
                                    
                                    <HBox spacing="15.0">
                                       <children>
                                          <VBox maxWidth="200.0" spacing="8.0">
                                             <children>
                                                <Label text="Decision" />
                                                <ComboBox fx:id="decisionComboBox" maxWidth="180.0" promptText="Select Decision" />
                                             </children>
                                          </VBox>
                                          
                                          <VBox maxWidth="200.0" spacing="8.0">
                                             <children>
                                                <Label text="Refund Amount" />
                                                <TextField fx:id="approvedAmountField" maxWidth="180.0" promptText="0.00" />
                                             </children>
                                          </VBox>
                                       </children>
                                    </HBox>
                                 </children>
                              </VBox>
                           </children>
                        </VBox>
                     </children>
                  </HBox>
               </children>
            </VBox>
            
            <!-- Refund Processing -->
            <VBox maxWidth="800.0" spacing="15.0">
               <children>
                  <Label text="Processing Information">
                     <font>
                        <Font name="System Bold" size="18.0" />
                     </font>
                  </Label>
                  
                  <HBox spacing="20.0">
                     <children>
                        <VBox maxWidth="250.0" spacing="8.0">
                           <children>
                              <Label text="Processing Method" />
                              <ComboBox fx:id="processingMethodComboBox" maxWidth="230.0" promptText="Select Method" />
                           </children>
                        </VBox>
                        
                        <VBox maxWidth="250.0" spacing="8.0">
                           <children>
                              <Label text="Expected Processing Time" />
                              <TextField fx:id="processingTimeField" editable="false" maxWidth="230.0" />
                           </children>
                        </VBox>
                        
                        <VBox maxWidth="250.0" spacing="8.0">
                           <children>
                              <Label text="Transaction Reference" />
                              <TextField fx:id="transactionRefField" maxWidth="230.0" promptText="Enter reference" />
                           </children>
                        </VBox>
                     </children>
                  </HBox>
               </children>
            </VBox>
            
            <!-- Action Buttons -->
            <HBox alignment="CENTER" maxWidth="800.0" spacing="20.0">
               <children>
                  <Button fx:id="saveButton" mnemonicParsing="false" onAction="#handleSave" text="Save Changes">
                     <font>
                        <Font size="14.0" />
                     </font>
                  </Button>
                  <Button fx:id="approveButton" mnemonicParsing="false" onAction="#handleApprove" text="Approve Refund">
                     <font>
                        <Font name="System Bold" size="14.0" />
                     </font>
                  </Button>
                  <Button fx:id="rejectButton" mnemonicParsing="false" onAction="#handleReject" text="Reject Request">
                     <font>
                        <Font size="14.0" />
                     </font>
                  </Button>
                  <Button fx:id="requestInfoButton" mnemonicParsing="false" onAction="#handleRequestInfo" text="Request More Info">
                     <font>
                        <Font size="14.0" />
                     </font>
                  </Button>
                  <Button fx:id="exportButton" mnemonicParsing="false" onAction="#handleExport" text="Export Report">
                     <font>
                        <Font size="14.0" />
                     </font>
                  </Button>
               </children>
            </HBox>
         </children>
         <padding>
            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
         </padding>
      </VBox>
   </content>
</ScrollPane> 